<div class="login-container">
  <mat-tab-group *ngIf="!isSignUpSubmitted; else signUpSubmitted" class="stretched-tabs">
    <mat-tab label="Войти">
      <div class="button-container">
        <a class="fbl-button" mat-stroked-button href="/api/auth/facebook">
          <fa-icon class="fb-icon" [icon]="faFacebook"></fa-icon>
          Вход с Facebook</a
        >
      </div>
      <div class="button-container">
        <a class="googlel-button" mat-stroked-button href="/api/auth/google">
          <fa-icon class="google-icon" [icon]="faGoogle"></fa-icon>
          Вход с Google</a
        >
      </div>
      <div class="login-form-or">
        <span>или</span>
      </div>
      <form class="login-form" [formGroup]="formLog" (ngSubmit)="submitLogin()">
        <mat-form-field class="full-width form-field">
          <input matInput placeholder="Email" type="email" id="email" required formControlName="email" />
          <mat-error>{{ errors.email | error: formLog.get('email').errors }}</mat-error>
        </mat-form-field>
        <mat-form-field class="full-width form-field">
          <input matInput placeholder="Пароль" type="password" id="password" required formControlName="password" />
          <mat-error>{{ errors.password | error: formLog.get('password').errors }}</mat-error>
        </mat-form-field>
        <div class="forgot-password-link">
          <small routerLink="forgot-password">Не можете войти?</small>
          <small routerLink="email-confirmation">Подтвердить email?</small>
        </div>
        <div>
          <button
            class="registration-button"
            mat-raised-button
            type="submit"
            color="primary"
            [disabled]="formLog.invalid || submitted"
          >
            Войти
          </button>
        </div>
      </form>
    </mat-tab>
    <mat-tab label="Регистрация">
      <div class="button-container">
        <a class="fbl-button" mat-stroked-button href="/api/auth/facebook">
          <fa-icon class="fb-icon" [icon]="faFacebook"></fa-icon>
          Регистрация с Facebook</a
        >
      </div>
      <div class="button-container">
        <a class="googlel-button" mat-stroked-button href="/api/auth/google">
          <fa-icon class="google-icon" [icon]="faGoogle"></fa-icon>
          Регистрация с Google</a
        >
      </div>
      <div class="login-form-or">
        <span>или</span>
      </div>
      <form class="login-form" [formGroup]="formReg" (ngSubmit)="submitRegister()">
        <mat-form-field class="full-width form-field">
          <input matInput placeholder="Email" type="email" id="regEmail" required formControlName="email" />
          <mat-error>{{ errors.email | error: formReg.get('email').errors }}</mat-error>
        </mat-form-field>
        <mat-form-field class="full-width form-field">
          <input matInput placeholder="Пароль" type="password" id="regPassword" required formControlName="password" />
          <mat-error>{{ errors.password | error: formReg.get('password').errors }}</mat-error>
        </mat-form-field>
        <mat-checkbox formControlName="checkbox" class="checkbox-field">
          <small>* Я соглашаюсь с правилами сервиса.</small>
        </mat-checkbox>
        <div>
          <button
            class="registration-button"
            mat-raised-button
            type="submit"
            color="primary"
            [disabled]="formReg.invalid || submitted"
          >
            Зарегистрироваться
          </button>
        </div>
      </form>
    </mat-tab>
  </mat-tab-group>
</div>

<ng-template #signUpSubmitted>
  <mat-card class="email-confirm-card">
    <mat-card-content class="mat-card-content">
      <h2>Сейчас вам нужно активировать аккаунт!</h2>
      <p>Перейдите по ссылке, которую мы Вам отправили. Если не найдёте письма в почте, проверьте Спам.</p>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button color="primary" routerLink="/" class="button-back">
        <span class="material-icons"> keyboard_arrow_left</span> Назад на главную
      </button>
    </mat-card-actions>
  </mat-card>
</ng-template>
